(this.webpackJsonptemplate=this.webpackJsonptemplate||[]).push([[0],{27:function(e,t,n){e.exports={map:"bakery_map_map__2XBRF"}},38:function(e,t,n){},39:function(e,t,n){},6:function(e,t,n){e.exports={makerDarkTransparent:"rgba(0,0,0,0.15)",makerDarkGreen:"#014001",header:"header_header__v9FKw",form:"header_form__CKDVN",search:"header_search__130F1",search_form:"header_search_form__1B5hE",btn:"header_btn__3Hd1x",img:"header_img__2KRuG"}},64:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),s=n(26),o=n.n(s),i=(n(38),n(39),n(32)),u=n(2),h=n(8),l=function(e){var t=e.shops_details;e.handlePhotos;return console.log(t),Object(a.jsx)("li",{})},p=n(27),j=n.n(p),f=n(28),d=function(e){e.places;var t=e.latNLng,n=Object(f.a)("AIzaSyDvrxdRlryJr6fvx14XdM42TMuvxSEt3hw",{center:t,zoom:15}),r=n.ref;n.map,n.google;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:j.a.map,ref:r}),Object(a.jsx)(l,{})]})},b=function(e){return Object(a.jsx)("footer",{children:"You can find brandnew bakery in your city"})},m=n(6),O=n.n(m),x=function(e){return Object(a.jsxs)("header",{className:O.a.header,children:[Object(a.jsx)("h1",{children:"Bakery Map"}),Object(a.jsxs)("form",{className:O.a.form,children:[Object(a.jsx)("input",{className:"".concat(O.a.search," ").concat(O.a.search_form),type:"text",placeholder:"Find a new bakery!"}),Object(a.jsx)("button",{className:"".concat(O.a.search," ").concat(O.a.btn),children:Object(a.jsx)("img",{className:O.a.img,src:"images/search.png",alt:"search icon"})})]})]})},g=function(e){var t=e.places;console.log("render home");var n=Object(r.useState)({lat:0,lng:0}),c=Object(h.a)(n,2),s=c[0],o=c[1],i=Object(r.useState)(!1),u=Object(h.a)(i,2),p=u[0],j=u[1],f=Object(r.useState)([]),m=Object(h.a)(f,2),O=m[0],g=m[1],_=Object(r.useState)([]),v=Object(h.a)(_,2),y=v[0],k=v[1],w=Object(r.useState)([]),S=Object(h.a)(w,2),E=S[0],N=S[1],R=Object(r.useState)([]),D=Object(h.a)(R,2),F=(D[0],D[1]),M=function(e){t.getPhotos(e).then((function(e){return F((function(t){return[e]}))}))};return Object(r.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){o({lat:e.coords.latitude,lng:e.coords.longitude}),j(!0)}))}),[p]),Object(r.useEffect)((function(){E.forEach((function(e){t.getDetail(e).then((function(e){var t=e.reviews;t&&(t=t.sort((function(e,t){return e.time-t.time})))[0].time>1577804400&&k((function(t){return t&&t.push({id:e.place_id,data:e}),t}))}))}))}),[t,E]),Object(r.useEffect)((function(){p&&t.getStore(s.lat,s.lng).then((function(e){return g(e.results)}))}),[s]),Object(r.useEffect)((function(){var e=O.map((function(e){return e.place_id}));N(e)}),[O]),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(x,{}),Object(a.jsx)("section",{children:Object(a.jsx)(d,{latNLng:s})}),Object(a.jsx)("section",{children:Object(a.jsx)("ul",{children:y&&Object.keys(y).map((function(e){return Object(a.jsx)(l,{shops_details:y[e].data,handlePhotos:M},e)}))})}),Object(a.jsx)(b,{})]})},_=function(e){var t=e.places;return Object(a.jsx)(i.a,{children:Object(a.jsx)(u.c,{children:Object(a.jsx)(u.a,{path:"/",children:Object(a.jsx)(g,{places:t})})})})};var v=function(e){var t=e.places;return Object(a.jsx)(_,{places:t})},y=n(7),k=n.n(y),w=n(10),S=n(30),E=n(31),N=n(11),R=n.n(N),D=new(function(){function e(t){Object(S.a)(this,e),this.key=t,this.getRequestOptions={method:"GET",redirect:"follow"}}return Object(E.a)(e,[{key:"getStore",value:function(){var e=Object(w.a)(k.a.mark((function e(t,n){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R()("https://maps.googleapis.com/maps/api/place/nearbysearch/json?location=".concat(t,",").concat(n,"&radius=5000&keyword=bakery&key=").concat(this.key),this.getRequestOptions);case 2:return a=e.sent,e.next=5,a.data;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDetail",value:function(){var e=Object(w.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R()("https://maps.googleapis.com/maps/api/place/details/json?fields=review,business_status,formatted_address,geometry,icon,name,photo,place_id,type,url,rating,formatted_phone_number,opening_hours,website&place_id=".concat(t,"&key=").concat(this.key),this.getRequestOptions);case 2:return n=e.sent,e.next=5,n.data.result;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPhotos",value:function(){var e=Object(w.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R()("https://maps.googleapis.com/maps/api/place/photo?photoreference=".concat(t,"&maxwidth=500&key=").concat(this.key),this.getRequestOptions);case 2:return n=e.sent,e.abrupt("return",n.config.url);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())("AIzaSyDvrxdRlryJr6fvx14XdM42TMuvxSEt3hw",0,0);o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(v,{places:D})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.e7b586fb.chunk.js.map